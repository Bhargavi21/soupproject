<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="5420adcc-f7ed-4660-a92e-48a5c36eb068" activeEnvironment="Default" name="calculator-webservice.mybluemix" resourceRoot="" soapui-version="5.6.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="f589bcd1-d9a5-41ed-8120-707b805282d8" wsaVersion="NONE" name="CalculatorPortBinding" type="wsdl" bindingName="{http://example.com/}CalculatorPortBinding" soapVersion="1_1" anonymous="optional" definition="http://calculator-webservice.mybluemix.net/calculator?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://calculator-webservice.mybluemix.net/calculator?wsdl"><con:part><con:url>http://calculator-webservice.mybluemix.net/calculator?wsdl</con:url><con:content><![CDATA[<!--Published by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.3.2 git-revision#3d0bba4.-->
<!--Generated by JAX-WS RI (https://github.com/eclipse-ee4j/metro-jax-ws). RI's version is JAX-WS RI 2.3.2 git-revision#3d0bba4.-->
<definitions targetNamespace="http://example.com/" name="CalculatorService" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://example.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://example.com/" schemaLocation="http://calculator-webservice.mybluemix.net/calculator?xsd=1"/>
    </xsd:schema>
  </types>
  <message name="subtract">
    <part name="parameters" element="tns:subtract"/>
  </message>
  <message name="subtractResponse">
    <part name="parameters" element="tns:subtractResponse"/>
  </message>
  <message name="multiply">
    <part name="parameters" element="tns:multiply"/>
  </message>
  <message name="multiplyResponse">
    <part name="parameters" element="tns:multiplyResponse"/>
  </message>
  <message name="add">
    <part name="parameters" element="tns:add"/>
  </message>
  <message name="addResponse">
    <part name="parameters" element="tns:addResponse"/>
  </message>
  <message name="divide">
    <part name="parameters" element="tns:divide"/>
  </message>
  <message name="divideResponse">
    <part name="parameters" element="tns:divideResponse"/>
  </message>
  <portType name="Calculator">
    <operation name="subtract">
      <input wsam:Action="http://example.com/Calculator/subtractRequest" message="tns:subtract"/>
      <output wsam:Action="http://example.com/Calculator/subtractResponse" message="tns:subtractResponse"/>
    </operation>
    <operation name="multiply">
      <input wsam:Action="http://example.com/Calculator/multiplyRequest" message="tns:multiply"/>
      <output wsam:Action="http://example.com/Calculator/multiplyResponse" message="tns:multiplyResponse"/>
    </operation>
    <operation name="add">
      <input wsam:Action="http://example.com/Calculator/addRequest" message="tns:add"/>
      <output wsam:Action="http://example.com/Calculator/addResponse" message="tns:addResponse"/>
    </operation>
    <operation name="divide">
      <input wsam:Action="http://example.com/Calculator/divideRequest" message="tns:divide"/>
      <output wsam:Action="http://example.com/Calculator/divideResponse" message="tns:divideResponse"/>
    </operation>
  </portType>
  <binding name="CalculatorPortBinding" type="tns:Calculator">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="subtract">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="multiply">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="add">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="divide">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="CalculatorService">
    <port name="CalculatorPort" binding="tns:CalculatorPortBinding">
      <soap:address location="http://calculator-webservice.mybluemix.net/calculator"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://calculator-webservice.mybluemix.net/calculator?xsd=1</con:url><con:content><![CDATA[<!--Published by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.3.2 git-revision#3d0bba4.-->
<xs:schema version="1.0" targetNamespace="http://example.com/" xmlns:tns="http://example.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="add" type="tns:add"/>
  <xs:element name="addResponse" type="tns:addResponse"/>
  <xs:element name="divide" type="tns:divide"/>
  <xs:element name="divideResponse" type="tns:divideResponse"/>
  <xs:element name="multiply" type="tns:multiply"/>
  <xs:element name="multiplyResponse" type="tns:multiplyResponse"/>
  <xs:element name="subtract" type="tns:subtract"/>
  <xs:element name="subtractResponse" type="tns:subtractResponse"/>
  <xs:complexType name="subtract">
    <xs:sequence>
      <xs:element name="intA" type="xs:int"/>
      <xs:element name="intB" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="subtractResponse">
    <xs:sequence>
      <xs:element name="value" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="add">
    <xs:sequence>
      <xs:element name="intA" type="xs:int"/>
      <xs:element name="intB" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="addResponse">
    <xs:sequence>
      <xs:element name="value" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="multiply">
    <xs:sequence>
      <xs:element name="intA" type="xs:int"/>
      <xs:element name="intB" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="multiplyResponse">
    <xs:sequence>
      <xs:element name="value" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="divide">
    <xs:sequence>
      <xs:element name="intA" type="xs:int"/>
      <xs:element name="intB" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="divideResponse">
    <xs:sequence>
      <xs:element name="value" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint></con:endpoints><con:operation id="ca74e9a5-06d3-4749-886f-e231491aaf35" isOneWay="false" action="" name="add" bindingOperationName="add" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="e721ca12-754a-46fa-acf0-dff716c36a39" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:add>\r
         <intA>5</intA>\r
         <intB>5</intB>\r
      </exam:add>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://example.com/Calculator/addRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="b23137f7-047f-4f2e-ab2a-a2de12eb91e0" isOneWay="false" action="" name="divide" bindingOperationName="divide" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a0bbbfcf-a1da-45a2-aba1-a60ae8763bf6" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:divide>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:divide>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://example.com/Calculator/divideRequest"/></con:call></con:operation><con:operation id="e418a4ef-656f-4485-877f-52256f5825cd" isOneWay="false" action="" name="multiply" bindingOperationName="multiply" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1c8ec0fa-e70d-4a6c-bb73-8ba938beb4dd" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:multiply>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:multiply>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://example.com/Calculator/multiplyRequest"/></con:call></con:operation><con:operation id="0f3b1eee-9276-4a5b-9275-a35064fa8efa" isOneWay="false" action="" name="subtract" bindingOperationName="subtract" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1330ef19-51e2-4c89-ab3d-02ee52838b44" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:subtract>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:subtract>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://example.com/Calculator/subtractRequest"/></con:call></con:operation></con:interface><con:testSuite id="b010e915-d26e-4714-a6dd-7b9a1ca90d8f" name="CalculatorPortBinding TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5924b7b3-4b49-43bf-b277-34b21a6bd6c9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="add TestCase" searchProperties="true"><con:settings/><con:testStep type="request" id="9861bb63-009e-4032-92b2-33a5ea11762a" name="add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>CalculatorPortBinding</con:interface><con:operation>add</con:operation><con:request name="add" id="645820a8-b48d-47a7-b8d6-117dde8b320c"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:add>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:add>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig action="http://example.com/Calculator/addRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="043ea4be-d1fb-4202-92a7-bdad447867c2"><con:settings/><con:config><script/></con:config></con:testStep><con:tearDownScript>// Code to execute the GenerateCSVReport test step
testRunner.testCase.testSuite.project.testSuites["Library"].testCases["Reporting_Utility"].
testSteps["GenerateCSVReport"].run(testRunner, context);</con:tearDownScript><con:properties><con:property><con:name>name</con:name><con:value>add</con:value></con:property></con:properties></con:testCase><con:testCase id="d340aca3-7892-4110-89a0-7a13d8846ddd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="divide TestCase" searchProperties="true"><con:settings/><con:testStep type="request" id="9dd037e0-8b21-4991-a1cf-5e5112952b03" name="divide"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>CalculatorPortBinding</con:interface><con:operation>divide</con:operation><con:request name="divide" id="51ed7ead-e938-4ab4-87de-ac393a0207e8"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:divide>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:divide>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig action="http://example.com/Calculator/divideRequest"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7f0e7c55-a69d-44d8-ab53-0e389361b1cd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="multiply TestCase" searchProperties="true"><con:settings/><con:testStep type="request" id="95815f8e-f75a-47a3-869a-84b9eec337a6" name="multiply"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>CalculatorPortBinding</con:interface><con:operation>multiply</con:operation><con:request name="multiply" id="f9bfb29c-2800-4806-9207-c3dd89106e7a"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:multiply>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:multiply>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig action="http://example.com/Calculator/multiplyRequest"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="771b52d8-e369-44e1-8090-bd64ad9885b2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="subtract TestCase" searchProperties="true"><con:settings/><con:testStep type="request" id="4381cfa9-36dd-4ba0-9fa9-541358b1b59c" name="subtract"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>CalculatorPortBinding</con:interface><con:operation>subtract</con:operation><con:request name="subtract" id="6266c895-b0bc-491b-b72f-eb7409cf99e7"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://calculator-webservice.mybluemix.net/calculator</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:exam="http://example.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <exam:subtract>\r
         <intA>?</intA>\r
         <intB>?</intB>\r
      </exam:subtract>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig action="http://example.com/Calculator/subtractRequest"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="b3b42090-7e88-4f0b-a9b8-b0420f2e2eef" name="Library" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="1b5cdc84-6885-4e42-b289-9643e80c762d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reporting_Utility" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script1" id="1c536810-c006-48a4-9b5a-dfb17d0eadae"><con:settings/><con:config><script>// Try-catch block to handle exceptions
try {
// 1. Create a "SoapUIResults" folder in the project path 
      // Retrieve the project root folder
      def projectPath = new com.eviware.soapui.support.GroovyUtils(context).projectPath
      // Specify a folder inside project root to store the results
      String folderPath = projectPath + "/SoapUIResults";
      // Create a File object for the specified path
      def resultFolder = new File(folderPath);
      // Check for existence of folder and create a folder
      if(!resultFolder.exists())
      {
        resultFolder.mkdirs();
      }
/* ------------------------------------------------------------------------------- */
// 2. Create a subfolder (with timestamp) to store the request-response local copy 
      // Retrieve the latest execution date-time
      Date d = new Date();
      def executionDate = d.format("dd-MMM-yyyy HH_mm");
      // Specify the subfolder path with name Request-Response_CurrentTimeStamp
      String subfolderPath1 = folderPath+ "/Request-Response_"+executionDate;
      // Create this sub-folder
      new File(subfolderPath1).mkdirs();
/* ------------------------------------------------------------------------------- */
// 3. Create another subfolder "CSV Reports" to store the reports file 
      // Specify the subfolder path with name CSV Reports
      String subfolderPath2 = folderPath+ "/CSV Reports";
      // Create this sub-folder
      new File(subfolderPath2).mkdirs();
/* ------------------------------------------------------------------------------- */
// 4. Create a Report.csv file inside the CSV Reports folder 
      // Create a File object for Report csv file (with timestamp)
      def reportFile = new File(subfolderPath2, "Report_"+executionDate+".csv");
      // Check for existence of report file and create a file
      if(!reportFile.exists())
      {
        reportFile.createNewFile();
        // Create required column names in the report file
        reportFile.write('"Test Suite","Test Case","Test Step","Step Type","Step Status",'
                        +'"Result message","Execution Date"');
      }
/* ------------------------------------------------------------------------------- */
// 5. Inserting data in the file
      // Iterate over all the test steps results
  for(stepResult in testRunner.getResults())
  {
    // Retrieve Test Suite name
   def testSuite = testRunner.testCase.testSuite.name;
   // Retrieve Test Case name
   def testCase = testRunner.testCase.name;
   // Retrieve Test Step
   def testStep = stepResult.getTestStep();
   // Retrieve Test Step name
   def testStepName = testStep.name
   // Retrieve Test Step type
   def type = testStep.config.type
   // Retrieve Test Step status
   def status = stepResult.getStatus()
   // Creating new line in report file
   reportFile.append('\n');
   // Write all the necessary information in the file
   reportFile.append('"' + testSuite + '",');
   reportFile.append('"' + testCase + '",');
   reportFile.append('"' + testStepName + '",');
   reportFile.append('"' + type + '",');
   reportFile.append('"' + status + '",');
   // Retrieve the test result messages
   reportFile.append('"');
   for(resMessage in stepResult.getMessages())
   {
     // Write messages and separate multiple messages by new line
     reportFile.append('Message:' + resMessage + '\n');
   }
   reportFile.append('",');
   //Write executionDate in the file
   reportFile.append('"' + executionDate + '",');
/* ------------------------------------------------------------------------------- */
// 6. Extract the request and response and save it to external file
      // Verify if the test step type is request: SOAP project or restrequest: REST project
        if((type=="request").or(type=="restrequest"))
        {
          // Extract the request from the test step
          def extRequest = testStep.properties["Request"].value;    
      // Create a file in the reports folder and write the request
      // Naming convention: request_TestSuiteName_TestCaseName_TestStepName.txt
      def requestFile=subfolderPath1+"/request_"+testSuite+"_"+testCase+"_"+testStepName+".txt";
      def rqfile = new File(requestFile);
      rqfile.write(extRequest, "UTF-8");
      // Extract the response from the test step
      def extResponse = stepResult.getResponseContent();    
      // Create a file in the reports folder and write the response
      // Naming convention: response_TestSuiteName_TestCaseName_TestStepName.txt
      def responseFile=subfolderPath1+"/response_"+testSuite+"_"+testCase+"_"+testStepName+".txt";
      def rsfile = new File(responseFile);
      rsfile.write(extResponse, "UTF-8");
     }
   }
 }
catch(exc)
{
   log.error("Exception happened: " + exc.toString());
}</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>